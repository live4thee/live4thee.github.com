+++
categories = ["work"]
date = "2017-11-04T20:28:51+08:00"
description = ""
tags = ["golang"]
title = "Second Life"
url = "/2017/11/04/second-life"
+++

标题想表达的意思是“两世为人”，不知道英文怎么表达比较贴切。

## 局域网

最近局域网的趋势越来越明显，而手机上的app要么下架，要么无法更新。折腾
了换区，发现资本家也是为虎作伥，堵死了很多入口。所谓“枪口抬高一公分”，
也只是呵呵而已。

## 一个 x509 证书的问题

昨天上午刚搞定一个积压已久的问题后，午后就有同事说某个服务器报告证书错
误，导致一些常用服务无法操作。而这台服务器的证书是去年六月生成的，几乎
是我们环境中最有“资历”的一张证书。

几番折腾后，最终结果如下：

1. 证书有问题；
2. 问题证书带有一个[SAN section](https://www.digicert.com/subject-alternative-name.htm)，指定的是那台服务器最初的IP地址；
3. 前几天，我们的build系统里，Golang 1.8.x 升级到了 1.9.2；
4. 1.9.2（或者之前）修复了x509 SAN的验证，问题证书被暴露出来；

其它没有复现这个问题的环境里面，证书都是通过自动化脚本生成，没有错误的
SAN设置。

## 进局子

刚搞定如上问题后，售前的兄弟跑过来问问题。回答了两个问题后，信心满满的
回到座位。屁股还没坐下来，就听见一声大叫“完了、完了”。听他描述了环境后，
我也心凉了半截。

问题代码已经存在一年多了，特殊的场景下某种操作会破坏生产环境。而售前兄
弟马上就要去某关键金融客户的生产环境去做实施。幸亏去之前，按照客户的环
境自己事先做了部署测试。“要不是我发现的早”，保安一定会让我“蹲下，别走”。
说不定还要“进局子”！

## 运气

匆忙去罗森买了干粮后，回去修复问题。电梯刚打开，就听售前兄弟说，幸亏前
两天POC因为某种原因没有进行下去，要不然我们就关门大吉了。
